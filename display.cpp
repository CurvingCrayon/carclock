#include "display.h"
uint8_t font[10][5][3] = {
  {//0
    {0xC0, 0xC0, 0xC0},
    {0xFF, 0x00, 0xFF},
    {0xFF, 0x00, 0xFF},
    {0xFF, 0x00, 0xFF},
    {0x03, 0x03, 0x03},
  },
  {//1
    {0xC0, 0xC0, 0x00},
    {0x00, 0xFF, 0x00},
    {0x00, 0xFF, 0x00},
    {0x00, 0xFF, 0x00},
    {0x03, 0x03, 0x03},
  },

  {//2
    {0x00, 0xC0, 0x00},
    {0x03, 0x00, 0xFF},
    {0x00, 0xFF, 0x00},
    {0xFF, 0x00, 0x00},
    {0x03, 0x03, 0x03},
  },
  {//3
    {0xC0, 0xC0, 0x00},
    {0x00, 0xC0, 0x3F},
    {0x00, 0x03, 0xFC},
    {0x00, 0x00, 0xFF},
    {0x03, 0x03, 0x00},
  },
  {//4
    {0xC0, 0x00, 0xC0},
    {0xFF, 0x00, 0xFF},
    {0x03, 0x03, 0xFF},
    {0x00, 0x00, 0xFF},
    {0x00, 0x00, 0x03},
  },
  {//5
    {0xC0, 0xC0, 0xC0},
    {0xFF, 0x00, 0x00},
    {0x03, 0x03, 0xFF},
    {0x00, 0x00, 0xFF},
    {0x03, 0x03, 0x03},
  },
  {//6
    {0xC0, 0xC0, 0x00},
    {0xFF, 0x00, 0x00},
    {0xFF, 0x03, 0xFF},
    {0xFF, 0x00, 0xFF},
    {0x03, 0x03, 0x03},
  },
  {//7
    {0xC0, 0xC0, 0xC0},
    {0x00, 0x00, 0xFF},
    {0x00, 0x00, 0xFF},
    {0x00, 0x00, 0xFF},
    {0x00, 0x00, 0x03},
  },
  {//8
    {0xC0, 0xC0, 0xC0},
    {0xFF, 0xC0, 0xFF},
    {0xFF, 0x03, 0xFF},
    {0xFF, 0x00, 0xFF},
    {0x03, 0x03, 0x03},
  },
  {//9
    {0xC0, 0xC0, 0xC0},
    {0xFF, 0x00, 0xFF},
    {0x03, 0x03, 0xFF},
    {0x00, 0x00, 0xFF},
    {0x00, 0x00, 0x03},
  },
  
};
uint8_t font_x = 3;
uint8_t font_y = 5;
uint8_t layer[8][32];

void place_char(int x, int y, int ch){
  for(int a = 0; a < font_y; a++){
    for(int b = 0; b < font_x; b++){
      layer[y+a][x+b] = font[ch][a][b];
    }
  }
}
void place_char_small(int x, int y, int ch){
  int r = 3;
  for(int a = 0; a < font_y; a++){
    for(int b = 0; b < font_x; b++){
      if(a == r){
        a++;
        y--;
      }
      layer[y+a][x+b] = font[ch][a][b];
    }
  }
}
void colon(int x, int y){
  layer[y+1][x+1] = 0xf0;
  layer[y+3][x+1] = 0x0f;
}
void clear_arr(){
  for(int x = 0; x<8;x++){
    for(int y = 0; y < 32; y++){
       layer[x][y] = 0;
    }
  }
}
void display_time(int h, int m, int s){
  int x = 1;
  place_char(x,0, h/16);
  x+=4;
  place_char(x,0, h%16);
  x+=4;
  colon(x,0);
  x+=4;

  place_char(x,0, m/16);
  x+=4;
  place_char(x,0, m%16);
  x+=4;
  colon(x,0);
  x+=4;
  
  place_char(x,0, s/16);
  x+=4;
  place_char(x,0, s%16);
}
void display_date(int d, int m, int yr){
  int x = 1;
  int y = 5;
  place_char_small(x, y, 6);
  x+=4;
  place_char_small(x, y, 7);
  x+=4;
  colon(x,0);
  x+=4;

  place_char_small(x, y, 8);
  x+=4;
  place_char_small(x, y, 9);
  x+=4;
  colon(x,0);
  x+=4;
  
  place_char_small(x, y, 4);
  x+=4;
  place_char_small(x, y, 5);
}